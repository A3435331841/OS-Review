# 操作系统第一章：导论

## 1. 操作系统概述

### 1.1 操作系统的定义

操作系统是管理计算机硬件的程序，同时为应用程序提供基础，并充当计算机硬件和计算机用户之间的中介。

一个比较公认的定义是：操作系统是一直运行在计算机上的程序（通常称为内核）。

更完整的定义：操作系统是一组控制和管理计算机硬件和软件资源，合理地组织计算机工作流程，以及方便用户的程序的集合。

### 1.2 计算机系统的组成部分

计算机系统可以大致分为四个部分：

1. **硬件(Hardware)** ：提供基本的计算资源，如CPU、内存、I/O设备等
2. **操作系统(Operating System)** ：控制与协调各用户应用程序对硬件的使用
3. **系统程序与应用程序(System and Application Programs)** ：定义解决用户问题的资源使用方式
4. **用户(Users)** ：使用计算机系统的人

### 1.3 操作系统的概念模型

* **裸机** ：没有配置**软件**的计算机，即仅有计算机硬件
* **虚拟机** ：覆盖了软件的机器称为虚拟机或扩展机

操作系统是配置在计算机硬件上的第一层软件，是对硬件的首次扩充，位于硬件与其它软件之间，是所有其他软件运行的基础。

## 2. 操作系统的目标与功能

### 2.1 配置操作系统的主要目标

1. 提供用户与计算机之间的接口，使计算机更易于使用
2. 有效地控制和管理计算机系统中的各种资源，使之得到更有效的利用
3. 合理地组织计算机系统的工作流程，以提高资源利用率并改善系统性能

### 2.2 研究操作系统的两个观点

1. **从用户观点看** ：操作系统是用户与计算机硬件之间的接口，为用户使用计算机提供服务
2. **从资源管理观点看** ：操作系统是计算机系统资源的管理者

### 2.3 OS管理的计算机系统资源

* 处理机（CPU）
* 存储器（内存）
* 设备（I/O设备）
* 文件（数据）

### 2.4 资源的共享使用方式

1. **时分复用** ：多个用户或程序轮流使用某个资源
2. **空分复用** ：多个用户或程序同时使用资源的一部分

## 3. 操作系统的发展历程

### 3.1 手工操作阶段（1940s-1950s中期）

* **特点** ：用户独占计算机资源，资源利用率低
* **方式** ：用户直接通过控制台操作计算机
* **问题** ：
* 人机矛盾：手工操作的慢速与CPU运算的高速之间的矛盾
* CPU与I/O设备速度不匹配的矛盾

### 3.2 批处理阶段

#### 3.2.1 早期批处理（单道批处理系统）

* **监督程序** ：最早的操作系统雏形，负责作业的自动过渡
* **批处理技术** ：对一批作业自动进行处理的技术
* **类型** ：
* **联机批处理** ：输入/输出操作在主机控制下进行
* **脱机批处理** ：使用外围机完成输入/输出操作，脱离主机进行
* **特征** ：
* 自动性：自动依次运行，无人工干预
* 顺序性：完成顺序与进入顺序相同
* 单道性：内存只有一道作业

#### 3.2.2 多道批处理系统

* **多道程序设计技术** ：将多个作业存放在主存中，这些程序在管理程序控制下交替运行
* **特点** ：
* 多道：内存中同时存放多道相互独立的程序
* 宏观上并行：多道程序都处于运行过程中
* 微观上串行：多道程序轮流占有CPU，交替执行
* **特征** ：
* 多道性：内存中同时存放多道相互独立的程序
* 无序性：进入顺序与完成顺序无严格对应关系
* 调度性：作业从提交到完成经历两级调度（作业调度、进程调度）
* 实例：

  ![1743939829115](image/第一章/1743939829115.png "图一：多道程序运行实例")

### 3.3 分时系统

* **动力** ：用户需求（人机交互、共享主机、方便用户上机）
* **分时技术** ：把处理机的运行时间分成很短的时间片，按时间片轮流把处理机分配给各联机作业
* **特征** ：
* 多路性/同时性：多用户同时使用计算机
* 交互性：人机会话方式直接控制程序
* 独立性：用户感觉独占计算机
* 及时性：用户请求能在很短时间内获得响应

### 3.4 实时系统

* **定义** ：能及时响应外部事件的请求，在规定时间内完成处理
* **分类** ：
* 实时控制系统：以计算机为中心的生产过程控制系统
* 实时信息处理系统：要求对信息进行实时处理的系统
* **特征** ：
* 及时性：响应时间由控制对象决定
* 可靠性：高可靠性

## 4. 操作系统的类型

### 4.1 基本类型

1. **批处理操作系统** ：无交互能力，追求高资源利用率和吞吐量
2. **分时操作系统** ：强交互性，多用户，及时响应
3. **实时操作系统** ：高可靠性，及时响应，简单交互

### 4.2 其他类型

1. **嵌入式操作系统** ：对智能芯片及其控制的各种部件模块等资源进行统一调度和控制
2. **个人计算机操作系统** ：供个人使用，功能强，价格便宜，单用户服务，图形界面
3. **网络操作系统** ：基于计算机网络，实现通信和资源共享
4. **分布式操作系统** ：多个处理单元通过网络连接，实现资源管理和任务动态分配

### 4.3 分布式操作系统与网络操作系统的比较

* **分布性** ：分布式系统中控制功能均匀分布；网络系统中控制功能集中在服务器
* **并行性** ：分布式系统可并行执行多任务；网络系统中任务通常在自己的计算机上处理
* **透明性** ：分布式系统对用户隐藏实现细节；网络系统主要是操作实现上的透明
* **共享性** ：分布式系统中所有资源可共享；网络系统中共享资源主要在服务器上
* **健壮性** ：分布式系统可通过容错保证系统运行；网络系统中服务器故障影响系统可靠性

## 5. 操作系统的基本特征

### 5.1 并发(Concurrency)

* **并行** ：两个或多个事件在同一时刻发生
* **并发** ：两个或多个事件在同一时间间隔内发生
* 在多道程序环境下，宏观上一段时间内有多道程序同时运行，但在单处理机系统中，微观上这些程序是交替执行的

### 5.2 共享(Sharing)

* **定义** ：系统中的资源可供多个并发执行的进程共同使用
* **方式** ：
* 互斥共享：一段时间只允许一个进程访问
* 同时访问：一段时间允许多个进程访问

### 5.3 虚拟(Virtualization)

* **定义** ：把一个物理上的实体变为若干个逻辑上的对应物
* **实现** ：如分时技术、虚拟内存等

### 5.4 不确定性(Asynchronism)

* **表现** ：多个作业的执行顺序和每个作业的执行时间是不确定的
* 也称异步性

## 6. 操作系统的运行模式

### 6.1 双重模式操作

* **核心态(内核模式)** ：又称管态、系统态，具有较高特权，能执行所有指令，访问所有寄存器和存储区
* **用户态** ：又称目态，具有较低特权，只能执行部分指令，访问部分寄存器和存储区
* 通过**模式位**来表示当前模式：内核模式(0)或用户模式(1)

## 7. 操作系统的资源管理功能

### 7.1 进程管理(处理机管理)

* **进程** ：正在执行的程序
* **主要任务** ：
* 进程控制：创建、撤销及状态转换
* 进程同步：对并发执行的进程进行协调
* 进程通信：完成进程间的信息交换
* 调度：作业调度和进程调度
* **具体活动** ：
* 进程创建和删除
* 进程挂起和恢复
* 提供进程同步机制
* 提供进程通信机制
* 提供死锁处理机制

### 7.2 内存管理(存储器管理)

* **内存** ：字或字节的大数组，每一字或字节有自己的地址
* **主要任务** ：方便用户使用存储器，提高存储器利用率，从逻辑上扩充内存
* **功能** ：
* 内存分配与回收
* 内存保护
* 地址映射
* 内存扩充
* **具体活动** ：
* 记录内存使用情况
* 决定进程和数据的调入调出
* 分配和回收存储空间

### 7.3 文件管理

* **文件** ：由创建者定义的一组相关信息的集合
* **主要任务** ：对文件进行管理，方便用户使用并保证文件安全性
* **功能** ：
* 文件存储空间管理
* 目录管理
* 文件操作管理
* 文件保护
* **具体活动** ：
* 创建和删除文件
* 创建和删除目录
* 提供文件和目录操作原语
* 文件映射到二级存储器
* 在稳定存储介质备份文件

### 7.4 设备管理

* **I/O子系统**组成：
  * 内存管理部分（缓冲区、高速缓存和假脱机系统）
  * 通用设备驱动接口
  * 特定硬件设备的驱动程序
* **功能** ：
* 设备分配
* 缓冲管理
* 设备驱动
* 设备独立性

## 8. 补充内容解析

根据第二个PDF文档内容，这里补充解释几个重要概念：

### 8.1 程序执行过程

文档展示了CPU执行指令的基本过程：

1. 取指令(Fetch)：从PC寄存器指定的地址获取指令
2. 解释指令(Interpret)：理解指令的含义和参数
3. 从内存读取(Read from Memory)：获取所需的数据
4. 形成完整指令(Form the full instruction)
5. 执行指令(Execute)：执行具体操作

### 8.2 中断机制

中断是操作系统的重要机制，处理流程包括：

1. CPU执行程序时，外设触发中断信号
2. 中断服务程序保护当前执行环境（保存现场）
3. 向中断管理芯片询问中断号
4. 查表获取中断服务程序的起始地址
5. 跳转执行对应的中断服务程序
6. 服务完成后恢复现场

### 8.3 栈在函数调用中的作用

栈在程序执行中用于保存函数调用的状态信息：

* 当一个函数调用另一个函数时，会将当前函数的状态(局部变量、参数、返回地址等)保存在栈中
* 函数执行完毕后，通过栈恢复调用者的状态
* 栈的LIFO(后进先出)特性正好满足函数调用的需求

### 8.4 操作系统发展简史

* 手动操作阶段：无操作系统
* 单道批处理：操作系统雏形，有作业调度，无交互能力
* 多道批处理：完整的操作系统，资源利用率优先
* 分时系统：注重交互能力和响应时间

## 总结

    操作系统作为计算机系统中的核心软件，其主要职责是管理计算机硬件资源，为用户提供接口，并为应用程序提供运行环境。它的发展经历了从手工操作到批处理再到分时、实时系统的过程，不同类型的操作系统适应了不同的应用需求。

    操作系统的四个基本特征（并发、共享、虚拟、不确定性）体现了它的本质特性，而资源管理功能（进程、内存、文件、设备管理）则构成了它的主要工作内容。通过双重运行模式（核心态和用户态）实现了系统的安全性和稳定性。

```

```

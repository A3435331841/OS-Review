# 第5章 CPU调度课后习题

## 练习5.2
**题干**: Explain the difference between preemptive and nonpreemptive scheduling.
（解释抢占式调度和非抢占式调度之间的区别。）

**解析**:
抢占式调度和非抢占式调度的主要区别在于进程对CPU的控制权转移方式：

抢占式调度（Preemptive Scheduling）：
- 允许操作系统根据某种条件（如优先级、时间片用完）停止正在执行的进程
- 将CPU分配给其他进程
- 当进程从运行状态转为就绪状态或从等待状态转为就绪状态时会触发调度
- 更适用于实时系统和交互式系统

非抢占式调度（Nonpreemptive Scheduling）：
- 一旦进程获得CPU，会一直执行直到它完成或主动放弃CPU（如I/O请求）
- 只有当进程终止或从运行状态转到等待状态时才会发生调度
- 实现简单，系统开销小
- 但不能处理紧急任务，响应性较差

## 练习5.4
**题干**: Consider the following set of processes, with the length of the CPU burst time given in milliseconds:

| Process | Burst Time | Priority |
|---------|------------|----------|
| P1      | 2          | 2        |
| P2      | 1          | 1        |
| P3      | 8          | 4        |
| P4      | 4          | 2        |
| P5      | 5          | 3        |

The processes are assumed to have arrived in the order P1, P2, P3, P4, P5, all at time 0.

a. Draw four Gantt charts that illustrate the execution of these processes using the following scheduling algorithms: FCFS, SJF, nonpreemptive priority (a larger priority number implies a higher priority), and RR (quantum = 2).

b. What is the turnaround time of each process for each of the scheduling algorithms in part a?

c. What is the waiting time of each process for each of these scheduling algorithms?

d. Which of the algorithms results in the minimum average waiting time (over all processes)?

**解析**:

### a. 四种调度算法的甘特图

1. FCFS (先来先服务):
```
0      2      3      11     15     20
|--P1--|--P2--|----P3-----|--P4--|--P5--|
```

2. SJF (最短作业优先，非抢占):
```
0      1      3      7      15     20
|--P2--|--P1--|--P4--|--P5--|----P3-----|
```

3. 非抢占优先级 (数字越大优先级越高):
```
0      8      13     15     17     20
|----P3-----|--P5--|--P1--|--P4--|--P2--|
```

4. RR (时间片轮转，quantum=2):
```
0  2  3  5  7  9  11 13 15 17 19 20
|P1|P2|P3|P4|P5|P3|P3|P4|P5|P3|P5|P3|
```

### b. 各调度算法下的周转时间

1. FCFS:
   - P1: 2 - 0 = 2
   - P2: 3 - 0 = 3
   - P3: 11 - 0 = 11
   - P4: 15 - 0 = 15
   - P5: 20 - 0 = 20
   
2. SJF:
   - P1: 3 - 0 = 3
   - P2: 1 - 0 = 1
   - P3: 20 - 0 = 20
   - P4: 7 - 0 = 7
   - P5: 15 - 0 = 15
   
3. 非抢占优先级:
   - P1: 15 - 0 = 15
   - P2: 20 - 0 = 20
   - P3: 8 - 0 = 8
   - P4: 17 - 0 = 17
   - P5: 13 - 0 = 13
   
4. RR (q=2):
   - P1: 2 - 0 = 2
   - P2: 3 - 0 = 3
   - P3: 20 - 0 = 20
   - P4: 15 - 0 = 15
   - P5: 19 - 0 = 19

### c. 各调度算法下的等待时间

1. FCFS:
   - P1: 0
   - P2: 2
   - P3: 3
   - P4: 11
   - P5: 15
   - 平均等待时间: (0+2+3+11+15)/5 = 6.2
   
2. SJF:
   - P1: 1
   - P2: 0
   - P3: 12
   - P4: 3
   - P5: 7
   - 平均等待时间: (1+0+12+3+7)/5 = 4.6
   
3. 非抢占优先级:
   - P1: 13
   - P2: 19
   - P3: 0
   - P4: 13
   - P5: 8
   - 平均等待时间: (13+19+0+13+8)/5 = 10.6
   
4. RR (q=2):
   - P1: 0
   - P2: 2
   - P3: 12
   - P4: 11
   - P5: 14
   - 平均等待时间: (0+2+12+11+14)/5 = 7.8

### d. 最小平均等待时间

从上面的分析可以看出，SJF算法的平均等待时间最小，为4.6ms。

## 选择题

### 选择题1
**题干**: 在分时操作系统中，进程调度经常采用 _____ 算法。
A. 随机 
B. 最高优先权
C. 时间片轮转 
D. 先来先服务

**解析**: 分时操作系统的主要特点是允许多个用户同时使用计算机系统，每个用户占用处理机的时间被分成很小的时间片轮流分配给各用户的进程。时间片轮转调度算法是实现这一目标的最佳选择，它能够确保每个进程在一定时间内获得响应。

**答案**: C

**题干**: _____ 优先权是在创建进程时确定的，确定之后在整个进程运行期间不再改变。
A. 静态 
B. 作业
C. 资源 
D. 动态

**解析**: 静态优先权是在进程创建时确定的，在整个进程运行期间保持不变。与之相对的是动态优先权，它会根据进程运行情况动态调整。

**答案**: A

### 选择题2
**题干**: _____ 是作业存在的惟一标志。
A. 进程名 
B. 进程控制块
C. 作业名 
D. 作业控制块

**解析**: 作业控制块(JCB)是作业存在的唯一标志，系统通过JCB感知作业的存在，包含了作业的名称、类型、状态、资源需求等信息。

**答案**: D

**题干**: 下述作业调度算法中，________调度算法与作业的估计运行时间有关。
A. 先来先服务 
B. 短作业优先
C. 时间片轮转 
D. 多级队列

**解析**: 短作业优先(SJF)调度算法是基于作业的估计运行时间进行调度的，它优先执行预计执行时间最短的作业。

**答案**: B

### 选择题3
**题干**: 现有3个同时到达的作业J1、J2和J3，它们的执行时间分别是T1、T2和T3，且T1＜T2＜T3。系统按单道方式运行且采用短作业优先算法，则平均周转时间是 _____ 。
A. (3T1+2T2+T3)/3 
B. (T1+T2+T3)/3
C. (T1+2T2+3T3)/3 
D. T1+T2+T3

**解析**: 
使用短作业优先算法，执行顺序为J1→J2→J3
- J1的周转时间: T1
- J2的周转时间: T1+T2
- J3的周转时间: T1+T2+T3
平均周转时间 = (T1+(T1+T2)+(T1+T2+T3))/3 = (3T1+2T2+T3)/3

**答案**: A

**题干**: 设有四个作业同时到达，每个作业的执行时间均为2小时，它们在一台处理器上按单道方式运行，则平均周转时间为 _____ 。
A. 8小时 
B. 2.5小时
C. 5小时 
D. 1小时

**解析**: 
假设这四个作业分别为J1、J2、J3、J4
- J1的周转时间: 2小时
- J2的周转时间: 2+2=4小时
- J3的周转时间: 2+2+2=6小时
- J4的周转时间: 2+2+2+2=8小时
平均周转时间 = (2+4+6+8)/4 = 20/4 = 5小时

**答案**: C

### 选择题4
**题干**: _____ 是指从作业提交给系统到作业完成的时间间隔。
A. 运行时间 
B. 等待时间
C. 周转时间 
D. 响应时间

**解析**: 周转时间是指从作业提交到系统开始，到作业完成为止的时间间隔，包括等待时间和实际执行时间。

**答案**: C

**题干**: 在下列调度层次中，所有操作系统中都必须配置的调度层次是_____。
A. 作业调度 
B. 进程调度
C. 交换调度 
D. 中级调度

**解析**: 进程调度（低级调度）是所有操作系统中都必须具备的，它负责从就绪队列中选取一个进程分配处理机。相比之下，作业调度、交换调度和中级调度不是所有操作系统都必须具备的。

**答案**: B

### 选择题5
**题干**: 采用时间片轮转法进行进程调度是为了____。
A. 多个终端都能得到系统的及时响应
B. 先来先服务
C. 优先级较高的进程得到及时响应
D. 需要CPU最短的进程先做

**解析**: 采用时间片轮转法的主要目的是确保多个终端用户都能在可接受的时间内得到系统响应，适用于分时系统，为每个进程提供公平的CPU使用机会。

**答案**: A

**题干**: 假设就绪队列中有10个进程，系统将时间片设为200ms， CPU进行进程切换要花费10ms。则系统开销所占的比率约为 _____。
A. 1％ 
B. 5％ 
C. 10％ 
D. 20％

**解析**: 
每个进程执行一个时间片，需要一次进程切换，10个进程需要10次切换
总时间 = 10×200ms + 10×10ms = 2000ms + 100ms = 2100ms
系统开销比率 = 切换时间/总时间 = 100ms/2100ms ≈ 0.0476 ≈ 5%

**答案**: B

## 填空题

### 填空题1
**题干**: 在 _____ 调度算法中，按照进程进入就绪队列的先后次序来分配处理机。

**答案**: 先来先服务(FCFS)

**题干**: 进程的调度方式有两种，一种是 ① ，另一种是 ② 。

**答案**: ①抢占方式 ②非抢占方式

**题干**: 一个作业可以分成若干顺序处理的加工步骤，每个加工步骤称为一个 ____ 。

**答案**: 作业步

**题干**: ① 调度是处理机的高级调度， ② 调度是处理机的低级调度。

**答案**: ①作业 ②进程

### 填空题2
**题干**: 进程调度算法采用时间片轮转法时，时间片过大，就会使轮转法转化为_____ 调度算法。

**答案**: 先来先服务(FCFS)

**题干**: 既考虑作业等待时间，又考虑作业执行时间的调度算法是 _____ 。

**答案**: 高响应比优先

**题干**: 作业生存期共经历四个状态，它们是 ① 、 ② 、 ③ 和 ④ 。

**答案**: ①提交状态 ②后备状态 ③运行状态 ④完成状态

## 考研题

### 考研题（09年）
**题干**: 下列进程调度中，综合考虑进程等待时间和执行时间的是（）。
A. 时间片轮转调度算法 
B. 短进程优先调度算法
C. 先来先服务调度算法 
D. 高响应比优先调度算法

**解析**: 高响应比优先调度算法综合考虑了进程的等待时间和执行时间，其优先权计算公式为：响应比 = 1 + 等待时间/执行时间。它既照顾了短作业（执行时间短），又考虑了等待时间长的作业。

**答案**: D

### 考研题（10年）
**题干**: 下列选项中，降低进程优先级的合理时机是 。
A. 进程的时间片用完
B. 进程刚完成I/O，进入就绪队列
C. 进程长期处于就绪队列中
D. 进程从就绪状态转为运行态

**解析**: 当进程的时间片用完时，表示该进程已经连续使用CPU一段时间，为了系统的公平性，此时适合降低其优先级，让其他进程有机会获得CPU。相比之下，进程完成I/O操作通常会提高其优先级；进程长期处于就绪队列中也通常会提高其优先级以避免饥饿；进程从就绪转为运行态是获得CPU的过程，不涉及优先级调整。

**答案**: A

### 考研题（11年）
**题干**: 下列选项中，满足短任务优先且不会发生饥饿现象的调度算法是____。
A. 先来先服务 
B. 高响应比优先
C. 时间片轮转 
D. 非抢占式短任务优先

**解析**: 高响应比优先调度算法在考虑短任务优先的同时，也通过响应比（1+等待时间/执行时间）考虑进程的等待时间，可以避免长任务的饥饿现象。而非抢占式短任务优先虽然优先执行短任务，但可能导致长任务长时间等待（饥饿）。

**答案**: B

### 考研题（12年）
**题干**: 若某单处理器多进程系统中有多个就绪进程，则下列关于处理机调度的叙述中，错误的是（）
A. 在进程结束时能进行处理机调度
B. 创建进程后能进行处理机调度
C. 在进程处于临界区时不能进行处理机调度
D. 在系统调用完成并返回用户态时能进行处理机调度

**解析**: 进程在临界区时，是否能进行处理机调度取决于调度方式。对于非抢占式调度，进程在临界区执行完毕前不会被调度；但对于抢占式调度，即使进程在临界区内，如果有更高优先级的进程就绪，也可能发生处理机调度。因此，选项C的说法过于绝对，是错误的。

**答案**: C

### 考研题（12年）
**题干**: 一个多道批处理系统中仅有P1和P2两个作业，P2比P1晚5ms到达。它们的计算和I/O操作顺序如下：
P1：计算60ms，I/O 80ms，计算20ms,
P2：计算120ms，I/O 40ms，计算40ms。
若不考虑调度和切换时间，则完成两个作业需要的时间最少是（）
A. 240ms 
B. 260ms 
C. 340ms 
D. 360ms

**解析**: 
假设P1先执行：
- 0~60ms：P1计算
- 60~140ms：P1进行I/O操作，同时P2计算（P2在5ms时到达，可以立即开始计算）
- 140~160ms：P1计算
- 160~240ms：P2继续计算（还剩40ms）
- 240~280ms：P2进行I/O操作
- 280~320ms：P2计算

总时间为320ms，但考虑P2的到达时间晚5ms，所以总时间是325ms，不符合选项。

如果P2先执行（考虑到P2晚5ms到达）：
- 5~125ms：P2计算
- 125~165ms：P2进行I/O操作，同时P1计算（从5ms开始，到165ms，P1完成了60ms计算）
- 165~205ms：P2计算
- 205~245ms：P1继续计算（完成剩余20ms）和I/O操作（开始）
- 245~285ms：P1的I/O操作继续进行（总计80ms）

总时间为285ms。但现实中，由于P2比P1晚5ms到达，所以在0~5ms期间系统是空闲的，P1需要等待P2执行完才能完成，因此最少时间应为285ms+5ms=290ms。这也不符合选项。

分析：选项中最接近的是260ms，如果我们假设P1和P2可以在各自的I/O期间并行执行计算任务，那么：
- 0~60ms：P1计算
- 5~125ms：P2计算
- 60~140ms：P1进行I/O操作
- 125~165ms：P2进行I/O操作
- 140~160ms：P1继续计算
- 165~205ms：P2继续计算
这种情况下，最少时间为205ms，也不符合选项。

经过重新分析，我们假设系统能够在一个作业进行I/O操作时立即切换到另一个作业：
- 0~60ms：P1计算
- 60~140ms：P1进行I/O，同时P2计算（P2在5ms时到达，计算120ms）
- 140~160ms：P1继续计算20ms
- 160~200ms：P2进行I/O，同时P1已完成
- 200~240ms：P2继续计算剩余的40ms

最终完成时间为240ms+P2的延迟5ms=245ms，最接近的选项是240ms。

另一种分析是考虑两个作业可能的最短完成时间（互相不影响的情况）：
- P1总执行时间：60+80+20=160ms
- P2总执行时间（考虑5ms延迟）：5+120+40+40=205ms
- 两个作业的最大完成时间为205ms，与240ms相差较大

再次分析，我们假设两个作业互相不阻塞，仅考虑CPU和I/O的重叠：
- P1：计算60ms，I/O 80ms（不使用CPU），计算20ms，总计CPU时间80ms
- P2：计算120ms，I/O 40ms（不使用CPU），计算40ms，总计CPU时间160ms
- 总CPU时间：80+160=240ms

基于以上分析，最短完成时间为240ms。

**答案**: A
